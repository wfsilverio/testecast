{% extends "layout.twig" %}
{% block title %}Contas{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h1 class="h4 mb-1">Contas</h1>
    {% if totalBalance is defined %}<div class="text-muted small">Saldo total: <strong>R$ {{ totalBalance|number_format(2, ',', '.') }}</strong></div>{% endif %}
  </div>
  <a class="btn btn-primary" href="/admin/accounts/new"><i class="bi bi-person-plus me-1"></i>Nova Conta</a>
 </div>
<div class="card">
  <div class="table-responsive p-0">
    <table class="table table-striped align-middle table-min mb-0">
      <thead>
        <tr><th>ID</th><th>Titular</th><th>Saldo</th><th class="text-end">Ações</th></tr>
      </thead>
      <tbody>
      {% for a in accounts %}
        <tr>
          <td>#{{ a.id }}</td>
          <td>{{ a.ownerName }}</td>
          <td>
            {% set formatted = a.balance|number_format(2, ',', '.') %}
            {% if a.balance > 0 %}
              <span class="badge bg-success text-white">R$ {{ formatted }}</span>
            {% else %}
              <span class="badge bg-secondary">R$ {{ formatted }}</span>
            {% endif %}
          </td>
          <td class="text-end">
            <a class="btn btn-sm btn-outline-secondary me-1" href="/admin/accounts/{{ a.id }}/edit"><i class="bi bi-pencil me-1"></i>Editar</a>
            <a class="btn btn-sm btn-primary" href="/accounts/{{ a.id }}"><i class="bi bi-box-arrow-in-right me-1"></i>Abrir</a>
          </td>
        </tr>
      {% else %}
        <tr><td colspan="4" class="text-center p-4">
          <div class="text-muted">Nenhuma conta cadastrada</div>
        </td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
